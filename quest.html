<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quest Detail • 로나월드</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-900">
<div class="mx-auto max-w-5xl p-4 sm:p-6 lg:p-8">
  <a href="index.html?tab=quests" class="inline-flex items-center gap-1 text-sm mb-3 text-blue-600 hover:underline">← 목록(퀘스트)으로</a>
  <article id="detail" class="border rounded-xl bg-white p-4"></article>
</div>
<script>
function safeImg(src, alt, cls){ if(!src) return ''; return `<img src="${src}" alt="${alt||''}" class="${cls||''}" onerror="this.style.display='none'">`; }
const SAMPLE = {
  quests: [
    { id:'q-1', code:'넬라 1-1', title:'마파의 의뢰', region:'빅토리아 아일랜드', type:'아이템수집', minLevel:15,
      npcImg:'https://placehold.co/80x80?text=NPC',
      reqItems:[{ itemId:'4000012', qty:50, name:'초록버섯의 갓'}],
      rewards:[{ itemId:'2000006', qty:50, name:'레몬'}, {exp:5600}],
      dialogues:[{speaker:'넬라', text:'어서 와요!'}]
    }
  ]
};
const params = new URLSearchParams(location.search);
const id = params.get('id')||'';
const q = SAMPLE.quests.find(x=> x.id===id);
const detail = document.getElementById('detail');
if(!q){ detail.innerHTML = '<div class="p-6 text-center text-sm text-gray-500">퀘스트를 찾을 수 없어요</div>'; }
else{
  const exp = (q.rewards||[]).reduce((a,r)=> a + (typeof r.exp==='number' ? r.exp : 0), 0);
  detail.innerHTML = `
  <div class="flex items-start gap-3">
    ${safeImg(q.npcImg, 'NPC', 'w-20 h-20 object-contain rounded-lg border bg-white')}
    <div class="min-w-0">
      <h2 class="text-xl font-semibold">${q.code ? q.code+' · ' : ''}${q.title}</h2>
      <div class="text-xs text-gray-600">${q.region||'-'} · ${q.type||'-'}${q.minLevel? ' · Lv.'+q.minLevel : ''}</div>
      <div class="text-xs text-gray-600 mt-1">EXP ${exp.toLocaleString()}</div>
    </div>
  </div>
  <section class="mt-6">
    <h3 class="text-sm font-semibold mb-2">대사</h3>
    <div class="rounded-lg border p-3 bg-white">${(q.dialogues||[]).map(d=>`<div class='text-sm'><b>${d.speaker}:</b> ${d.text}</div>`).join('')}</div>
  </section>
  `;
}
</script>
</body>
</html>
